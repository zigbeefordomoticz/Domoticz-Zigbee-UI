"use strict";(self.webpackChunkz4d_plugin=self.webpackChunkz4d_plugin||[]).push([[521],{16521:(U,p,a)=>{a.r(p),a.d(p,{SettingsModule:()=>w});var v=a(93887),f=a(93331),d=a(38117),t=a(54438),_=a(88652),E=a(3366),r=a(89417),h=a(45794),b=a(38852),l=a(19664),k=a(37542),F=a(60177),S=a(97013);function j(i,c){if(1&i&&(t.j41(0,"div",4),t.EFF(1,"\n    "),t.nrm(2,"label",5),t.EFF(3,"\n    "),t.j41(4,"div",6),t.EFF(5,"\n      "),t.nrm(6,"input",7),t.EFF(7,"\n    "),t.k0s(),t.EFF(8,"\n  "),t.k0s()),2&i){const n=t.XpG(2);t.R7$(2),t.FS9("translate",n.setting.Name)}}function C(i,c){if(1&i&&(t.j41(0,"div",4),t.EFF(1,"\n    "),t.nrm(2,"label",5),t.EFF(3,"\n    "),t.j41(4,"div",6),t.EFF(5,"\n      "),t.nrm(6,"input",7),t.EFF(7,"\n    "),t.k0s(),t.EFF(8,"\n  "),t.k0s()),2&i){const n=t.XpG(2);t.R7$(2),t.FS9("translate",n.setting.Name)}}function T(i,c){if(1&i&&(t.j41(0,"div",4),t.EFF(1,"\n    "),t.nrm(2,"label",5),t.EFF(3,"\n    "),t.j41(4,"div",6),t.EFF(5,"\n      "),t.nrm(6,"input",8),t.EFF(7,"\n    "),t.k0s(),t.EFF(8,"\n  "),t.k0s()),2&i){const n=t.XpG(2);t.R7$(2),t.FS9("translate",n.setting.Name)}}function G(i,c){if(1&i&&(t.j41(0,"div",4),t.EFF(1,"\n    "),t.nrm(2,"label",5),t.EFF(3,"\n    "),t.j41(4,"div",6),t.EFF(5,"\n      "),t.nrm(6,"input",9),t.EFF(7,"\n    "),t.k0s(),t.EFF(8,"\n  "),t.k0s()),2&i){const n=t.XpG(2);t.R7$(2),t.FS9("translate",n.setting.Name)}}function N(i,c){if(1&i&&(t.j41(0,"div",4),t.EFF(1,"\n    "),t.nrm(2,"label",5),t.EFF(3,"\n    "),t.j41(4,"div",6),t.EFF(5,"\n      "),t.j41(6,"ng-select",10),t.EFF(7,"\n      "),t.k0s(),t.EFF(8,"\n    "),t.k0s(),t.EFF(9,"\n  "),t.k0s()),2&i){const n=t.XpG(2);t.R7$(2),t.FS9("translate",n.setting.Name),t.R7$(4),t.Y8G("items",n.list)("compareWith",n.compareNumeric)("closeOnSelect",!0)}}function R(i,c){if(1&i&&(t.j41(0,"div",11),t.EFF(1,"\n    "),t.nrm(2,"input",12),t.EFF(3,"\n    "),t.nrm(4,"label",13),t.EFF(5,"\n  "),t.k0s()),2&i){const n=t.XpG(2);t.R7$(2),t.FS9("id",n.setting.Name),t.R7$(2),t.FS9("for",n.setting.Name),t.FS9("translate",n.setting.Name)}}function y(i,c){if(1&i&&(t.j41(0,"div",1),t.EFF(1,"\n  "),t.DNE(2,j,9,1,"div",2),t.EFF(3,"\n  "),t.DNE(4,C,9,1,"div",2),t.EFF(5,"\n  "),t.DNE(6,T,9,1,"div",2),t.EFF(7,"\n  "),t.DNE(8,G,9,1,"div",2),t.EFF(9,"\n  "),t.DNE(10,N,10,4,"div",2),t.EFF(11,"\n  "),t.DNE(12,R,6,3,"div",3),t.EFF(13,"\n"),t.k0s()),2&i){const n=t.XpG();t.Y8G("formGroupName",n.setting.Name),t.R7$(2),t.Y8G("ngIf","str"===n.setting.DataType),t.R7$(2),t.Y8G("ngIf","path"===n.setting.DataType),t.R7$(2),t.Y8G("ngIf","int"===n.setting.DataType),t.R7$(2),t.Y8G("ngIf","hex"===n.setting.DataType),t.R7$(2),t.Y8G("ngIf","list"===n.setting.DataType),t.R7$(2),t.Y8G("ngIf","bool"===n.setting.DataType)}}new d.Vy("SettingComponent");let $=(()=>{class i{formBuilder;fgd;translate;setting;advanced;list=[];constructor(n,e,s){this.formBuilder=n,this.fgd=e,this.translate=s}ngOnChanges(n){let e;if(n.setting&&n.setting.currentValue){this.setting=n.setting.currentValue,"hex"===this.setting.DataType?e=this.formBuilder.group({current:["",r.k0.compose([r.k0.required,r.k0.pattern("^[0-9A-Fa-f]+")])]}):"bool"===this.setting.DataType?e=this.formBuilder.group({current:[]}):"list"===this.setting.DataType?(e=this.formBuilder.group({current:[null,r.k0.required]}),this.list=[],this.setting.list.forEach(o=>{const m=Object.keys(o)[0],g=Object.values(o)[0];this.list.push({label:m,value:g})})):e=this.formBuilder.group({current:["",r.k0.required]}),this.fgd.form.addControl(this.setting.Name,e);const s=""!==this.setting.current_value?this.setting.current_value:this.setting.default_value;this.fgd.form.get(this.setting.Name).get("current").patchValue(s)}}compareNumeric(n,e){return isNaN(n.value)?n.value===e:n.value===Number(e)}static \u0275fac=function(e){return new(e||i)(t.rXU(r.ok),t.rXU(r.j4),t.rXU(l.c$))};static \u0275cmp=t.VBU({type:i,selectors:[["app-setting"]],inputs:{setting:"setting",advanced:"advanced"},features:[t.Jv_([],[{provide:r.ZU,useExisting:r.j4}]),t.OA$],decls:2,vars:1,consts:[[3,"formGroupName",4,"ngIf"],[3,"formGroupName"],["class","form-group row mt-2",4,"ngIf"],["class","form-check form-check-inline mt-2",4,"ngIf"],[1,"form-group","row","mt-2"],["for","current",1,"col-sm-6","col-form-label",3,"translate"],[1,"col-sm"],["type","text","formControlName","current",1,"w-100","form-control"],["type","number","formControlName","current",1,"w-50","form-control"],["type","text","formControlName","current",1,"w-50","form-control"],["bindLabel","label","bindValue","value","formControlName","current",3,"items","compareWith","closeOnSelect"],[1,"form-check","form-check-inline","mt-2"],["formControlName","current","type","checkbox",1,"form-check-input",3,"id"],[1,"form-check-label",3,"for","translate"]],template:function(e,s){1&e&&(t.DNE(0,y,14,7,"div",0),t.EFF(1,"\n")),2&e&&t.Y8G("ngIf",!1===s.setting.Advanced||s.advanced===s.setting.Advanced)},dependencies:[F.bT,r.me,r.Q0,r.Zm,r.BC,r.cb,r.JD,r.$R,S.vr,l.Mm],styles:["was-validated[_ngcontent-%COMP%]   .custom-control-input[_ngcontent-%COMP%]:valid ~ .custom-control-label[_ngcontent-%COMP%], .custom-control-input.is-valid[_ngcontent-%COMP%] ~ .custom-control-label[_ngcontent-%COMP%]{color:#000}"]})}return i})();const u=["contentRestart"];function x(i,c){if(1&i&&(t.qex(0),t.EFF(1,"\n              "),t.nrm(2,"app-setting",25),t.EFF(3,"\n            "),t.bVm()),2&i){const n=c.$implicit,e=t.XpG(4);t.R7$(2),t.Y8G("setting",n)("advanced",e.advanced)}}function O(i,c){if(1&i&&(t.j41(0,"div",21),t.EFF(1,"\n        "),t.nrm(2,"div",22),t.EFF(3,"\n        "),t.j41(4,"div",23),t.EFF(5,"\n          "),t.nrm(6,"p",17),t.EFF(7,"\n          "),t.j41(8,"div",24),t.EFF(9,"\n            "),t.DNE(10,x,4,2,"ng-container",19),t.EFF(11,"\n          "),t.k0s(),t.EFF(12,"\n        "),t.k0s(),t.EFF(13,"\n      "),t.k0s()),2&i){const n=t.XpG().$implicit,e=t.XpG(2);t.R7$(2),t.Y8G("innerHTML",e.getTranslation("setting.header.",n._Theme),t.npT),t.R7$(4),t.Y8G("innerHTML",e.getTranslation("setting.subtitle.",n._Theme),t.npT),t.R7$(4),t.Y8G("ngForOf",n.ListOfSettings)}}function B(i,c){if(1&i&&(t.j41(0,"div"),t.EFF(1,"\n      "),t.DNE(2,O,14,3,"div",20),t.EFF(3,"\n    "),t.k0s()),2&i){const n=c.$implicit,e=t.XpG(2);t.R7$(2),t.Y8G("ngIf",e.hasBasicSettings(n.ListOfSettings))}}function I(i,c){if(1&i){const n=t.RV6();t.j41(0,"form",4),t.EFF(1,"\n  "),t.j41(2,"fieldset",5),t.EFF(3,"\n    "),t.j41(4,"legend"),t.EFF(5,"\n      "),t.j41(6,"div",6),t.EFF(7,"\n        "),t.nrm(8,"h5",7),t.nI1(9,"translate"),t.EFF(10,"\n        "),t.j41(11,"div",8),t.EFF(12,"\n          "),t.j41(13,"div",9),t.EFF(14,"\n            "),t.j41(15,"div",10),t.EFF(16,"\n              "),t.j41(17,"button",11),t.bIt("click",function(){t.eBV(n);const s=t.XpG();return t.Njj(s.updateSettings())}),t.k0s(),t.EFF(18,"\n            "),t.k0s(),t.EFF(19,"\n            "),t.j41(20,"div",12),t.EFF(21,"\n              "),t.j41(22,"button",13),t.bIt("click",function(){t.eBV(n);const s=t.XpG();return t.Njj(s.reinitSettings())}),t.k0s(),t.EFF(23,"\n            "),t.k0s(),t.EFF(24,"\n            "),t.j41(25,"div",14),t.EFF(26,"\n              "),t.j41(27,"input",15),t.bIt("click",function(s){t.eBV(n);const o=t.XpG();return t.Njj(o.advancedSettings(s))}),t.k0s(),t.EFF(28,"\n              "),t.nrm(29,"label",16),t.EFF(30,"\n            "),t.k0s(),t.EFF(31,"\n          "),t.k0s(),t.EFF(32,"\n        "),t.k0s(),t.EFF(33,"\n      "),t.k0s(),t.EFF(34,"\n    "),t.k0s(),t.EFF(35,"\n    "),t.nrm(36,"p",17),t.nI1(37,"translate"),t.EFF(38,"\n  "),t.k0s(),t.EFF(39,"\n  "),t.j41(40,"div",18),t.EFF(41,"\n    "),t.DNE(42,B,4,1,"div",19),t.EFF(43,"\n  "),t.k0s(),t.EFF(44,"\n"),t.k0s()}if(2&i){const n=t.XpG();t.Y8G("formGroup",n.form),t.R7$(8),t.Y8G("innerHTML",t.bMT(9,6,"setting.help.legend"),t.npT),t.R7$(9),t.Y8G("disabled",!n.form.valid),t.R7$(10),t.Y8G("checked",n.advanced),t.R7$(9),t.Y8G("innerHTML",t.bMT(37,8,"setting.help.link"),t.npT),t.R7$(6),t.Y8G("ngForOf",n.settings)}}function D(i,c){if(1&i){const n=t.RV6();t.EFF(0,"\n  "),t.j41(1,"div",26),t.EFF(2,"\n    "),t.nrm(3,"h4",27),t.EFF(4,"\n    "),t.j41(5,"button",28),t.bIt("click",function(){const s=t.eBV(n).$implicit;return t.Njj(s.dismiss("Cross click"))}),t.k0s(),t.EFF(6,"\n  "),t.k0s(),t.EFF(7,"\n  "),t.nrm(8,"div",29),t.EFF(9,"\n  "),t.j41(10,"div",30),t.EFF(11,"\n    "),t.j41(12,"button",31),t.bIt("click",function(){const s=t.eBV(n).$implicit;return t.Njj(s.dismiss("cancel"))}),t.k0s(),t.EFF(13,"\n  "),t.k0s(),t.EFF(14,"\n")}}function X(i,c){if(1&i){const n=t.RV6();t.EFF(0,"\n  "),t.j41(1,"div",26),t.EFF(2,"\n    "),t.nrm(3,"h4",32),t.EFF(4,"\n    "),t.j41(5,"button",28),t.bIt("click",function(){const s=t.eBV(n).$implicit;return t.Njj(s.dismiss("Cross click"))}),t.k0s(),t.EFF(6,"\n  "),t.k0s(),t.EFF(7,"\n  "),t.nrm(8,"div",33),t.EFF(9,"\n  "),t.j41(10,"div",30),t.EFF(11,"\n    "),t.j41(12,"button",34),t.bIt("click",function(){const s=t.eBV(n).$implicit;return t.Njj(s.dismiss("cancel"))}),t.k0s(),t.EFF(13,"\n  "),t.k0s(),t.EFF(14,"\n")}}function M(i,c){if(1&i){const n=t.RV6();t.EFF(0,"\n  "),t.j41(1,"div",26),t.EFF(2,"\n    "),t.nrm(3,"h4",35),t.EFF(4,"\n    "),t.j41(5,"button",28),t.bIt("click",function(){const s=t.eBV(n).$implicit;return t.Njj(s.dismiss("Cross click"))}),t.k0s(),t.EFF(6,"\n  "),t.k0s(),t.EFF(7,"\n  "),t.nrm(8,"div",36),t.EFF(9,"\n  "),t.j41(10,"div",30),t.EFF(11,"\n    "),t.j41(12,"button",37),t.bIt("click",function(){const s=t.eBV(n).$implicit;return t.Njj(s.dismiss("cancel"))}),t.k0s(),t.EFF(13,"\n  "),t.k0s(),t.EFF(14,"\n")}}new d.Vy("SettingsComponent");const V=[{path:"",component:(()=>{class i{modalService;apiService;formBuilder;toastr;headerService;translate;tracker;contentRestart;contentReset;contentErase;form;settings;advanced=!1;constructor(n,e,s,o,m,g,L){this.modalService=n,this.apiService=e,this.formBuilder=s,this.toastr=o,this.headerService=m,this.translate=g,this.tracker=L}ngOnInit(){this.form=this.formBuilder.group({}),this.apiService.getSettings().subscribe(n=>{this.settings=n,this.settings.sort((e,s)=>e._Order-s._Order)})}reinitSettings(){this.settings.forEach(n=>{const e=[];n.ListOfSettings.forEach(s=>{"path"!==s.DataType&&(s.current_value=s.default_value),e.push(Object.assign({},s))}),n.ListOfSettings=e}),this.settings=[...this.settings],this.form.markAsTouched()}advancedSettings(n){this.advanced=!!n.currentTarget.checked}updateSettings(){this.form.invalid?this.form.markAsTouched():(Object.keys(this.form.value).forEach(n=>{!0===this.form.value[n].current?this.form.value[n].current=1:!1===this.form.value[n].current&&(this.form.value[n].current=0)}),this.apiService.putSettings(this.form.value).subscribe(()=>{this.form.markAsPristine(),this.toastr.success(this.translate.instant("api.global.succes.saved.notify")),this.apiService.getSettings().subscribe(n=>{this.settings=n,this.settings.sort((e,s)=>e._Order-s._Order),n.forEach(e=>{e.ListOfSettings.forEach(o=>{"PluginAnalytics"===o.Name&&(1===o.current_value?(this.tracker.setConsentGiven(),this.tracker.rememberConsentGiven()):this.tracker.forgetConsentGiven())})})}),this.apiService.getRestartNeeded().subscribe(n=>{1===n.RestartNeeded?(this.headerService.setRestart(!0),this.open(this.contentRestart)):2===n.RestartNeeded?this.open(this.contentReset):3===n.RestartNeeded&&this.open(this.contentErase)})}))}open(n){this.modalService.open(n,{ariaLabelledBy:"modal-basic-title"}).result.then(e=>{},e=>{})}hasBasicSettings(n){return!!this.advanced||n.filter(e=>!1===e.Advanced).length>0}getTranslation(n,e){return this.translate.instant(n.concat(e))}static \u0275fac=function(e){return new(e||i)(t.rXU(_.Bq),t.rXU(E.G),t.rXU(r.ok),t.rXU(h.tw),t.rXU(b.d),t.rXU(l.c$),t.rXU(k.kA))};static \u0275cmp=t.VBU({type:i,selectors:[["app-settings"]],viewQuery:function(e,s){if(1&e&&(t.GBs(u,5),t.GBs(u,5),t.GBs(u,5)),2&e){let o;t.mGM(o=t.lsd())&&(s.contentRestart=o.first),t.mGM(o=t.lsd())&&(s.contentReset=o.first),t.mGM(o=t.lsd())&&(s.contentErase=o.first)}},decls:11,vars:1,consts:[["contentRestart",""],["contentReset",""],["contentErase",""],[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"h-100"],[1,"row"],[1,"col-sm-8",3,"innerHTML"],[1,"col-sm-4"],[1,"d-flex","flex-row-reverse","align-items-center"],[1,"p-2"],["translate","setting.validate.button",1,"btn","btn-primary",3,"click","disabled"],[1,"p-2","ms-3"],["translate","setting.reinit.button",1,"btn","btn-secondary",3,"click"],[1,"switch","switch-sm"],["type","checkbox","id","switch-advanced",1,"switch",3,"click","checked"],["for","switch-advanced","translate","setting.advanced.button",1,"mb-0"],[1,"card-text",3,"innerHTML"],[1,"row","row-cols-1","row-cols-md-3","g-4","mt-2"],[4,"ngFor","ngForOf"],["class","card h-100",4,"ngIf"],[1,"card","h-100"],[1,"card-header","fw-bold",3,"innerHTML"],[1,"card-body"],[1,"card-text"],[3,"setting","advanced"],[1,"modal-header"],["id","modal-basic-title","translate","setting.reloadplugin.alert.title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],["translate","setting.reloadplugin.alert.subject",1,"modal-body"],[1,"modal-footer"],["type","button","translate","setting.reloadplugin.alert.cancel",1,"btn","btn-outline-dark",3,"click"],["id","modal-basic-title","translate","setting.resetplugin.alert.title",1,"modal-title"],["translate","setting.resetplugin.alert.subject",1,"modal-body"],["type","button","translate","setting.resetplugin.alert.cancel",1,"btn","btn-outline-dark",3,"click"],["id","modal-basic-title","translate","setting.eraseplugin.alert.title",1,"modal-title"],["translate","setting.eraseplugin.alert.subject",1,"modal-body"],["type","button","translate","setting.eraseplugin.alert.cancel",1,"btn","btn-outline-dark",3,"click"]],template:function(e,s){1&e&&(t.DNE(0,I,45,10,"form",3),t.EFF(1,"\n\n"),t.DNE(2,D,15,0,"ng-template",null,0,t.C5r),t.EFF(4,"\n\n"),t.DNE(5,X,15,0,"ng-template",null,1,t.C5r),t.EFF(7,"\n\n"),t.DNE(8,M,15,0,"ng-template",null,2,t.C5r),t.EFF(10,"\n")),2&e&&t.Y8G("ngIf",s.settings)},dependencies:[F.Sq,F.bT,r.qT,r.cb,r.j4,l.Mm,$,l.D9],styles:[".btn-secondary[_ngcontent-%COMP%]{--bs-btn-color: white}"]})}return i})(),data:{title:(0,d.o6)("settings")}}];let Y=(()=>{class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=t.$C({type:i});static \u0275inj=t.G2t({imports:[f.iI.forChild(V),f.iI]})}return i})(),w=(()=>{class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=t.$C({type:i});static \u0275inj=t.G2t({imports:[Y,v.G]})}return i})()}}]);